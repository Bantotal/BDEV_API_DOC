<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li>v1.0</li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introducci-n">Introducci√≥n</h1>

<p>Bienvenido a ¬°<strong>Bantotal Developers</strong>! Aqu√≠ encontrar√°s toda la documentaci√≥n necesaria para utilizar nuestra API y conectarte a Bantotal. De esta forma tu producto podr√° ser utilizado por m√°s de 50 bancos en 15 pa√≠ses.</p>

<p>Te brindamos recursos tales como: autenticaci√≥n, clientes, cuentas, pagos, movimientos, entre otros. </p>

<p>Identifica los que necesitas y comienza ahora üòÉ</p>

<h1 id="autenticaci-n">Autenticaci√≥n</h1>

<p>La autenticaci√≥n es la llave üîë que te permitir√° trabajar con nuestra API. </p>

<p>Todos los recursos de nuestra plataforma son privados. Esto quiere decir que por ejemplo, si deseas que tu aplicaci√≥n acceda a los datos de un cliente, el cliente deber√° darle permisos.
Para autenticar utilizamos el conocido protocolo <a href="https://oauth.net/2/">oAuth 2.0</a>.</p>

<p>El protocolo se divide en <strong>dos grandes partes</strong>:</p>

<ol>
<li>Obtener un <em>access_token</em> para un cliente (mediante la aprobaci√≥n del cliente).</li>
<li>Accesso a los recursos mediante el <em>access_token</em>.</li>
</ol>

<p>Antes de comenzar a detallar cada una de las partes, es <strong>importante</strong> mencionar que una vez que tu aplicaci√≥n este registrada en B[Developers], tendra asignado un <em>client_id</em> y un <em>client_secret</em>.</p>

<p><code class="prettyprint">client_id: 123456789</code></p>

<p><code class="prettyprint">client_secret: shhhhhhhh</code></p>

<aside class="notice">
Para registrar tu aplicaci√≥n ingres√° en `https://developers.bantotal.com/admin`
</aside>

<h2 id="obtener-el-access-token">Obtener el access token</h2>

<p>El <em>access_token</em> o token de cliente es el tipo de token m√°s com√∫n. Se necesita cada vez que la aplicaci√≥n solicita a la API, que lea o modifique datos del Banco en nombre del cliente. Los <em>access_token</em> se obtienen mediante un cuadro de di√°logo de inicio de sesi√≥n y requieren que el cliente conceda permiso üëç a la aplicaci√≥n.</p>

<p>Aunque cada plataforma genera <em>access_token</em> mediante API&rsquo;s distintas, todas siguen una estrategia b√°sica para obtenerlo:</p>

<ol>
<li>La aplicaci√≥n solicita al cliente que se autentique en el banco, y le de permisos de acceso a sus datos.</li>
<li>El cliente se autentica y le otorga los permisos a la aplicaci√≥n.</li>
<li>La aplicaci√≥n recibe el c√≥digo de autorizaci√≥n.</li>
<li>La aplicaci√≥n intercambia el c√≥digo de autorizaci√≥n por el <em>access_token</em>. </li>
</ol>

<h3 id="paso-1">Paso 1</h3>

<p>En este paso, la aplicaci√≥n que desarrolles, deber√° <strong>redireccionar</strong> al login del Banco para que los usuarios puedan autenticarse y posteriormente autorizar tu aplicaci√≥n. Simplemente debes efectuar un redireccionamiento al URL:</p>

<blockquote>
<p>Remplaza <em>123456789</em> por tu client_id, y <em>https://www.youawesomeapp.com</em> por la url de tu aplicaci√≥n</p>
</blockquote>

<p><code class="prettyprint">https://developers.bantotal.com/auth/dialog/authorize?client_id=123456789&amp;response_type=code&amp;redirect_uri=https://www.youawesomeapp.com/</code></p>

<h3 id="parametros">Parametros</h3>

<table><thead>
<tr>
<th>Parametro</th>
<th>Descripci√≥n</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>Es el client_id de tu aplicaci√≥n.</td>
</tr>
<tr>
<td>response_type</td>
<td>code ‚Äì Indica que la operaci√≥n deseada es obtener un c√≥digo de autenticaci√≥n que le permitir√° a tu aplicaci√≥n interactuar con el Banco.</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>URL ‚Äì Es el URL de tu aplicaci√≥n.</td>
</tr>
</tbody></table>

<p>Una vez que redirecciones al cliente al URL, ya puedes dejar de preocuparte, nosotros nos encargamos de la autenticaci√≥n üòâ</p>

<h3 id="paso-2">Paso 2</h3>

<p>Una vez que el cliente complete el proceso de autenticaci√≥n en la p√°gina del Banco, ser√° redireccionado a la p√°gina de autorizaci√≥n de tu aplicaci√≥n. All√≠ se le presentar√°n todos los permisos solicitados junto a la descripci√≥n de tu aplicaci√≥n.</p>

<p>De esto tampoco debes preocuparte üòä</p>

<h3 id="paso-3">Paso 3</h3>

<p>Otorgados los permisos, el cliente ser√° redireccionado al Redirect URI (el que nos pasaste en el URL anterior) con el c√≥digo de autorizaci√≥n, de la siguiente forma:</p>

<p><code class="prettyprint">https://www.youawesomeapp.com/?code=SERVER_GENERATED_AUTHORIZATION_CODE</code></p>

<h3 id="paso-4">Paso 4</h3>

<blockquote>
<p>Aqu√≠ un ejemplo:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST 
  -H <span class="s2">"Content-Type: application/x-www-form-urlencoded"</span> 
  -H <span class="s2">"Authorization: Basic YWJjMTIzOnNzaC1zZWNyZXQ="</span> 
  -d <span class="s1">'client=blablabla&amp;code=SERVER_GENERATED_AUTHORIZATION_CODE&amp;redi
  rect_uri=https://www.youawesomeapp.com/&amp;grant_type=authorization_code'</span>
  <span class="s2">"https://developers.bantotal.com/auth/oauth/token"</span>
</code></pre>

<blockquote>
<p>El POST te retornar√° la siguiente estructura JSON:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOY62IRjcTaYpCfh4nAJmXnV"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Solo resta el √∫ltimo paso. Aqu√≠ deberas intercambiar el <code class="prettyprint">code</code> obtenido por el 
<code class="prettyprint">access_token</code>.</p>

<p>Para ello deber√°s realizar el siguiente POST:</p>

<p><code class="prettyprint">https://developers.bantotal.com/auth/oauth/token</code></p>

<p>Como ver√°s en el ejemplo de la derecha, uno de los parametros pasados en el Header es Authorization. <strong>En este comando esperamos que nos pases tu client_id y tu client_secret en Base64</strong>. De esta manera: client_id:client_secret. </p>

<p><a href="https://es.wikipedia.org/wiki/Autenticaci%C3%B3n_de_acceso_b%C3%A1sica">Aqu√≠</a> üëà puedes ver como generar el string de HTTP Basic authentication.</p>

<table><thead>
<tr>
<th>Parametro</th>
<th>Descripci√≥n</th>
</tr>
</thead><tbody>
<tr>
<td>client</td>
<td>Es el client_id de tu aplicaci√≥n.</td>
</tr>
<tr>
<td>code</td>
<td>El c√≥digo de autorizaci√≥n obtenido en el paso anterior.</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>URL ‚Äì Es el URL de tu aplicaci√≥n.</td>
</tr>
<tr>
<td>grant_type</td>
<td>authorization_code ‚Äì Indica que la operaci√≥n deseada es intercambiar el ‚Äúcode‚Äù por un access_token.</td>
</tr>
</tbody></table>

<p>¬°Listo! Como ver√°s en la respuesta obtendr√°s el <em>access_token</em> para realizar llamadas a nuestra API, y as√≠ obtener acceso a los datos privados del cliente üöÜ</p>

<h2 id="acceso-a-los-recursos">Acceso a los recursos</h2>
<pre class="highlight shell"><code><span class="c"># El access_token obtenido en el paso anterior, </span>
se pasa en Authorization: Bearer access_token
curl -X GET 
  -H <span class="s2">"Authorization: Bearer hUEM8g7EK4u8hxFYpIw1YPlkjjrY"</span> 
  <span class="s2">"https://developers.bantotal.com/api/v1/clients"</span>
</code></pre>

<blockquote>
<p>El GET te retornar√° la siguiente estructura JSON:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kr">import</span> <span class="nx">BD</span> <span class="nx">from</span> <span class="s1">'bd-client-js'</span>

<span class="kr">const</span> <span class="nx">BantotalDevelopers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BD</span><span class="p">()</span>

<span class="nx">BantotalDevelopers</span><span class="p">.</span><span class="nx">getClient</span><span class="p">(</span><span class="nx">acceess_token</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Your code</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error'</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FGH546H34KLO98OP"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Camila"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"secondName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lucia"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"surname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Irachet"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"secondSurname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bonifacino"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"documentType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C.I."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"documentCountry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Uruguay"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18 de Julio 2523, Montevideo, Uruguay"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cboni@mail.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Ahora que ya tienes el <code class="prettyprint">access_token</code>, podr√°s acceder a los recursos.</p>

<p>Veamos un ejemplo.</p>

<aside class="notice">
Para el ejemplo utilizamos la consulta de cliente, pero fue solamente un ejemplo. A partir de ahora, cada recurso que quieras consumir, ser√° de la misma manera, enviandole el access_token del cliente en el Header.
</aside>

<h1 id="clientes">Clientes</h1>

<p>En esta secci√≥n, encontrar√°s todos los recursos asociados a los datos de los clientes. Por ejemplo, sus datos personales registrados en el banco.</p>

<h2 id="obtener-datos">Obtener datos</h2>
<pre class="highlight shell"><code>curl -X GET 
  -H <span class="s2">"Authorization: Bearer hUEM8g7EK4u8hxFYpIw1YPlkjjrY"</span> 
  <span class="s2">"https://developers.bantotal.com/api/v1/clients"</span>
</code></pre>

<blockquote>
<p>El GET te retornar√° la siguiente estructura JSON:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FGH546H34KLO98OP"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Camila"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"secondName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lucia"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"surname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Irachet"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"secondSurname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bonifacino"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"documentType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C.I."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"documentCountry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Uruguay"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18 de Julio 2523, Montevideo, Uruguay"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cboni@mail.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Este endpoint retorna los datos del cliente autenticado.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://developers.bantotal.com/api/v1/clients</code></p>

<h1 id="cuentas">Cuentas</h1>

<p>En esta secci√≥n, encontrar√°s todos los recursos asociados a las cuentas de los clientes. Por ejemplo, consulta de sus cuentas, alta de cuentas, consulta movimientos, etc.</p>

<h2 id="obtener-cuentas">Obtener cuentas</h2>
<pre class="highlight shell"><code>curl -X GET 
  -H <span class="s2">"Authorization: Bearer hUEM8g7EK4u8hxFYpIw1YPlkjjrY"</span> 
  <span class="s2">"https://developers.bantotal.com/api/v1/accounts"</span>
</code></pre>

<blockquote>
<p>El GET te retornar√° la siguiente estructura JSON:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"productType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CC"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1200"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cuenta corriente 1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"productType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CC"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25800"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cuenta corriente 2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"productType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Caja de ahorro 1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"productType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"78500"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Caja de ahorro 2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Este endpoint retorna las cuentas del cliente autenticado.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://developers.bantotal.com/api/v1/accounts</code></p>

<h2 id="obtener-una-cuenta">Obtener una cuenta</h2>
<pre class="highlight shell"><code>curl -X GET 
  -H <span class="s2">"Authorization: Bearer hUEM8g7EK4u8hxFYpIw1YPlkjjrY"</span> 
  <span class="s2">"https://developers.bantotal.com/api/v1/accounts/&lt;UID&gt;"</span>
</code></pre>

<blockquote>
<p>El GET te retornar√° la siguiente estructura JSON:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"productType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1200"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cuenta corriente 1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Este endpoint retorna la informaci√≥n de una √∫nica cuenta, la cual es filtrada mediante la URL.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://developers.bantotal.com/api/v1/accounts/&lt;UID&gt;</code></p>

<table><thead>
<tr>
<th>Parametro</th>
<th>Descripci√≥n</th>
</tr>
</thead><tbody>
<tr>
<td>UID</td>
<td>Identificador de la cuenta.</td>
</tr>
</tbody></table>

<h2 id="obtener-movimientos-de-una-cuenta">Obtener movimientos de una cuenta</h2>
<pre class="highlight shell"><code>curl -X GET 
  -H <span class="s2">"Authorization: Bearer hUEM8g7EK4u8hxFYpIw1YPlkjjrY"</span> 
  <span class="s2">"https://developers.bantotal.com/api/v1/accounts/&lt;UID&gt;/movements"</span>
</code></pre>

<blockquote>
<p>El GET te retornar√° la siguiente estructura JSON:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AA45GH5TM789DS34"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ASD56F54G890KKL"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a4e29a77cc84c393da1da7d06beb0ec0d12ae58314e26b137f913f4f85e25e2f"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Debit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-18T17:59:11.858Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"valueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-18T17:59:11.858Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14060"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ammount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Impuestos"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pago de sueldo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"chanel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cajero autom√°tico"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Este endpoint retorna los movimientos de una √∫nica cuenta, la cual es filtrada mediante la URL.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://developers.bantotal.com/api/v1/accounts/&lt;UID&gt;/movements</code></p>

<table><thead>
<tr>
<th>Parametro</th>
<th>Descripci√≥n</th>
</tr>
</thead><tbody>
<tr>
<td>UID</td>
<td>Identificador de la cuenta.</td>
</tr>
</tbody></table>

<h2 id="crear-cuenta-de-ahorro">Crear cuenta de ahorro</h2>
<pre class="highlight shell"><code>curl -X POST 
  -H <span class="s2">"Authorization: Bearer hUEM8g7EK4u8hxFYpIw1YPlkjjrY"</span>  
  -H <span class="s2">"Content-Type: application/x-www-form-urlencoded"</span> 
  -d <span class="s1">'currency=USD'</span> 
  <span class="s2">"https://developers.bantotal.com/api/v1/savingAccounts"</span>
</code></pre>

<blockquote>
<p>El POST te retornar√° la siguiente estructura JSON:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FGT567J7HAAA22EX"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Este endpoint da de alta una cuenta de ahorro al cliente.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://developers.bantotal.com/api/v1/savingAccounts</code></p>

<table><thead>
<tr>
<th>Parametro</th>
<th>Descripci√≥n</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>Moneda de la cuenta (valores v√°lidos <code class="prettyprint">USD</code> - <code class="prettyprint">$</code>).</td>
</tr>
</tbody></table>

<h1 id="transferencias">Transferencias</h1>

<p>En esta secci√≥n, encontrar√°s todos los recursos asociados a las transferencias entre cuentas.</p>

<h2 id="entre-cuentas">Entre cuentas</h2>

<p>La transferencia entre cuentas consta de dos pasos:</p>

<h3 id="paso-1">Paso 1</h3>

<p>Iniciar transferencia: Se solicita la transferencia y Bantotal se encarga de c√°lculo de comisiones, impuestos y cambio de moneda.</p>
<pre class="highlight shell"><code>curl -X POST 
  -H <span class="s2">"Authorization: Bearer hUEM8g7EK4u8hxFYpIw1YPlkjjrY"</span>  
  -H <span class="s2">"Content-Type: application/x-www-form-urlencoded"</span> 
  -d <span class="s1">'uidDebit=1&amp;uidCredit=2&amp;currency=USD&amp;ammount=200&amp;reference=Pago de almuerzo'</span> 
  <span class="s2">"https://developers.bantotal.com/api/v1/initTransferMyAccounts"</span>
</code></pre>

<blockquote>
<p>El POST te retornar√° la siguiente estructura JSON:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34FGH67J90KLLL0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34652e1d575bb6c5daf3884e70baf13839a62b4c1a218fd14f487c073bcb7d82"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-18T17:59:25.823Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"uidDebit"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"debitBalance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2500"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"uidCredit"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"creditBalance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://developers.bantotal.com/api/v1/initTransferMyAccounts</code></p>

<table><thead>
<tr>
<th>Parametro</th>
<th>Descripci√≥n</th>
</tr>
</thead><tbody>
<tr>
<td>uidDebit</td>
<td>Identificador de cuenta d√©bito</td>
</tr>
<tr>
<td>uidCredit</td>
<td>Identificador de cuenta c√©dito</td>
</tr>
<tr>
<td>currency</td>
<td>Moneda de la transferencia (valores v√°lidos <code class="prettyprint">USD</code> - <code class="prettyprint">$</code>)</td>
</tr>
<tr>
<td>ammount</td>
<td>Importe de la transferencia</td>
</tr>
<tr>
<td>reference</td>
<td>Texto de referencia</td>
</tr>
</tbody></table>

<aside class="notice">
En la versi√≥n 1.0 de la API no estamos devolviendo impuestos, comiesiones, cambios de moneda. Pero tenlo en cuenta, pronto estar√° disponible.
</aside>

<h3 id="paso-2">Paso 2</h3>

<p>Confirmar transferencia: Se confirma el pago üí∞</p>
<pre class="highlight shell"><code>curl -X POST 
  -H <span class="s2">"Authorization: Bearer hUEM8g7EK4u8hxFYpIw1YPlkjjrY"</span>  
  -H <span class="s2">"Content-Type: application/x-www-form-urlencoded"</span> 
  -d <span class="s1">'uid=34FGH67J90KLLL0'</span> 
  <span class="s2">"https://developers.bantotal.com/api/v1/confirmTransferMyAccounts"</span>
</code></pre>

<blockquote>
<p>El POST te retornar√° la siguiente estructura JSON:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34FGH67J90KLLL0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34652e1d575bb6c5daf3884e70baf13839a62b4c1a218fd14f487c073bcb7d82"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-18T17:59:25.823Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"uidDebit"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"debitBalance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2500"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"uidCredit"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"creditBalance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://developers.bantotal.com/api/v1/confirmTransferMyAccounts</code></p>

<table><thead>
<tr>
<th>Parametro</th>
<th>Descripci√≥n</th>
</tr>
</thead><tbody>
<tr>
<td>uid</td>
<td>Identificador de la transferencia a confirmar</td>
</tr>
</tbody></table>

          <h1 id="errores">Errores</h1>

<aside class="notice">Todos los endpoints manejan los errores de la misma manera</aside>

<p>La API utiliza los siguientes c√≥digos:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Descripci√≥n</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Alg√∫no de los parametros es incorrecto</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; El access_token es inv√°lido</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; La URL que solicitaste no existe</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; Upps, tuvimos un error (tambi√©n tenemos bugs).</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; Nuestro servidor esta temporalmente fuera de servicio.</td>
</tr>
</tbody></table>

<h1 id="pr-ximos-pasos">Pr√≥ximos pasos</h1>

<p>Actualmente estamos en la versi√≥n 1.0.
Te informaremos cuales ser√°n las features que tenemos en vista para la pr√≥xima versi√≥n (1.1).</p>

<p><code class="prettyprint">Quer√©mos que nos ayudes a mejorar. 
¬øQu√© necesitas? 
¬øHay algo que no te gusta? Esperamos tus comentarios.</code></p>

<p>El Team de B[Developers] ‚úåÔ∏è</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
